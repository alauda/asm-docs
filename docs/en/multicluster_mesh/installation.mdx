---
weight: 15
i18n:
  title:
    en: Installation
---

# Installation

This article will use two AWS EKS (Amazon Elastic Kubernetes Service) clusters, c1 and c2, located in different VPCs (Virtual Private Clouds) as examples to illustrate how to build a multi-cluster, multi-network service mesh.

:::note

For demonstration purposes, this article only selects two clusters to build the mesh. In practice, you can add more clusters that meet the prerequisites to the service mesh according to your needs.

:::

## Prerequisites

* For private clouds, ensure that Kubernetes LoadBalancer (e.g., MetaLB) is configured on all clusters to provide load balancing capabilities for Istio gateways deployed on the clusters.
* All clusters have been connected to the platform.
* Monitoring components have been deployed for all clusters through <ExternalSiteLink name="acp" href="/observability/monitor/functions/install_monitor.html#install-the-acp-monitoring-with-victoriametrics-plugin" children="Deploy monitoring component" />, including **VictoriaMetrics**. <br />To ensure that monitoring data from multiple clusters can be aggregated, make sure that the monitoring data of multiple clusters to be added to the mesh can be collected to the same VictoriaMetrics Center with the same data query address.
    **Note**: Tested, **VictoriaMetrics** supports the **multi-master architecture** service mesh well. For support with other monitoring solutions, please contact technical support.
* All **control nodes** and **load balancing devices** (if any) in all clusters must have port `6443` for kube-apiserver open, and the `6443` port of the load balancing device must forward traffic to the `6443` port of the control node.
* Ensure that the Kubernetes version of the clusters is compatible with the Istio version supported by the platform. For detailed information, see [Istio's Supported Kubernetes Versions](https://istio.io/latest/docs/releases/supported-releases/).

## Create a service mesh

Select one of the prepared clusters and create a service mesh.

When creating the mesh, configure the corresponding parameters as follows, and configure other parameters as needed:

* Deploy Istio for the mesh.
* Choose `Multi-cluster` for the **Mesh Architecture**.
* Choose `Multi-network` for the **Network Type**.
    **Note**: The platform will automatically deploy east-west traffic gateways for all clusters joining the mesh, connecting the networks between clusters.
* Integrate with the monitoring components provided by `the platform` for the **Monitoring System**.

## Add clusters

1. In the left navigation bar, click **Service Mesh** > **Mesh**.
2. Click the ***Service Mesh Name*** of the cluster to be added.
3. Under the **Mesh Details** tab, in the **Mesh Deployment** section, click **Add Cluster**.
4. In the **Basic Information** section, select the cluster to join the service mesh.
5. Configure the mesh configuration and components at the cluster level according to the actual deployment needs.
6. Click **Add**.
   
    **Note**:
    
    * After successful addition, the system will deploy service mesh-related components on the cluster in sequence. Click <img src="./assets/show_status.png" style={{display: "inline", verticalAlign: "middle"}} /> in the **Mesh Deployment** section to view the deployment progress.
    
    * After adding a cluster, the global configuration of the mesh (monitoring system, Elasticsearch integration configuration) will automatically synchronize to the newly added cluster.