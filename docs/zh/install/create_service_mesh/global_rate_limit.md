---
weight: 25
title: 启用全局限流
sourceSHA: a4669ecfbcce8527196298bcec9b568deb01ec4ee9313ec82f244858f8d55dab
---

如果您需要使用全局限流功能，则需要通过连接到 Redis 来启用服务的全局限流。

您可以连接到平台的数据服务提供的 Redis，或者连接到您自己的 Redis。

## 连接到平台提供的 Redis

如果您的企业已订阅 **数据服务** 并通过数据服务部署了可以连接到网格管理集群的 Redis（集群模式、哨兵模式），可以参考以下步骤和说明来获取并配置服务网格集群维度的 **Redis 配置**。

**获取 Redis 访问方法**

1. 切换到数据服务平台，从左侧导航栏选择 **Redis**。

2. 在左侧集群列表中，选择 Redis 部署的 ***集群，命名空间***。

3. 点击 ***Redis 名称***。

   - 在 **详细信息** 标签中，查看 **密钥字典** 以获取访问 Redis 的密码。

   - 在 **访问方法** 标签中，您可以查看连接 Redis 所需的配置信息。

**Redis 配置说明**

根据 Redis 的 **部署模式** 和 **部署位置**，参考以下说明来配置服务网格集群维度的 **Redis 配置**。

**注意**：

- **认证方式**：如果要连接的 Redis 设置了密码，请选择 **基本认证** 并输入密码。

- **地址列表**：输入多个地址以增强访问地址的可用性，使用逗号分隔。

- **连接方式**：**同一集群** 表示 Redis 部署在要连接的网格中的集群；**跨集群** 表示部署 Redis 的集群与要连接的网格不是同一集群。

| Redis 部署模式       | 连接方式          | Mesh 到 Redis 配置                                                                                                                                                                                                                                                        |
| ------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **哨兵模式**        | **同一集群**       | **部署模式**：集群-哨兵模式。<br>**主节点名称**：必须填写 `mymaster`。<br>**地址列表**：输入 **内部访问** 区域显示的 **连接地址** （`<internal routing name>.<Redis instance namespace name>:<port>` 或 `<internal routing IP>:<port>`）。 |
| **哨兵模式**        | **跨集群**        | **部署模式**：集群-哨兵模式。<br>**主节点名称**：必须填写 `mymaster`。<br>**地址列表**：输入 **外部访问** 区域显示的 **连接地址** （`<Pod IP>:<port>`）。                                                                                  |
| **集群模式**        | **同一集群**       | **部署模式**：集群-集群模式。<br>**地址列表**：输入 **内部访问** 区域显示的 **连接地址**（`<shard internal routing name>.<Redis instance namespace name>:<port>`）。                                                                        |
| **集群模式**        | **跨集群**        | **部署模式**：集群-集群模式。<br>**地址列表**：输入 **外部访问 - 通过 Pod 的 NodePort** 区域显示的 1 个或多个包含 Nodeport 的 Pod (`<Pod IP>:<port>`)。                                                                        |

## 连接非平台 Redis

请参考以下配置说明以连接非平台 Redis。

| 参数                     | 描述                                                                                                                                                                                                                                                                                                                                                      |
| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **部署模式**            | **单节点**：部署在单个节点上的 Redis，缺乏灾难恢复能力，不推荐用于生产环境。<br>**集群-哨兵模式**：请参考 [官方文档](https://redis.io/docs/manual/sentinel/)。<br>**集群-集群模式**：请参考 [官方文档](https://redis.io/docs/manual/scaling/)。 |
| **地址/地址列表**       | Redis 的访问地址，支持 HTTP/HTTPS 协议地址，格式为：`<protocol (optional)>://<IP/domain>:<port>`。<br>**提示**：输入多个地址以增强访问地址的可用性，使用逗号分隔。                                                                                                                   |
| **主节点名称**          | 仅在哨兵模式下需要，此为主节点的名称。                                                                                                                                                                                                                                                                                                                      |
| **认证方式**            | 访问 Redis 时的身份验证方式。<br>- **基本认证**：输入访问 Redis 的密码。<br>- **无认证**：访问时无须身份验证。                                                                                                                                                                                                                                     |
