---
title: 场景
description: 介绍服务网格产品能够满足的业务场景。
weight: 4
sourceSHA: 755796965991e58ba865019ce02ff9364a6ae2a08920f38da07cea3e74dcb8c7
---

## 构建分布式微服务系统

### 场景描述

在将企业应用程序迁移到容器化和微服务的过程中，形成了一个庞大而复杂的分布式微服务架构。需要一个能够管理和操作这些服务的系统，以帮助开发人员解决面临的挑战，如服务发现、负载均衡、故障恢复、指标收集和监控、灰度发布、限流、访问控制、端到端认证等。

### 解决方案

Istio 提供了一个完整的微服务解决方案，通过为整个服务网格提供行为洞察和操作控制，以满足微服务应用的多样化需求。该平台高度依赖于 Istio，企业用户仅需接入服务平台，即可使用该平台以非侵入方式对企业应用和服务提供全方位的治理能力，功能全面，涵盖服务全球可视化、服务发布管理、服务连接可靠性治理、服务网格生命周期管理、服务错误故障排除、服务安全治理场景。

## 全球服务可视化

### 场景描述

在复杂的微服务应用场景中，开发人员需要实时查看服务的整体运行情况，包括服务调用关系、追踪路由、监控信息等，以便了解组件之间的通信。这有助于在发生故障或性能问题时迅速识别具体的问题所在，提高运营效率，降低业务风险。

### 解决方案

该平台在 Istio 的基础上集成了 [OpenTelemetry Java Agent](https://github.com/open-telemetry/opentelemetry-java-instrumentation) 和 [Jaeger](https://www.jaegertracing.io/docs/1.42/)，提供全面的可观察性能力。

- 以非侵入的方式收集监控数据，使开发人员能够专注于业务开发，而无需担心如何获取监控数据。

- 以图表形式可视化服务调用拓扑和流量监控数据，并支持追踪数据查询。

- 服务的流量治理策略、路由规则和安全策略可以通过表单快速配置和管理。

## 服务发布管理

### 场景描述

在微服务应用快速迭代和优化的过程中，如果新版本直接发布给所有用户，一旦出现在线事故（如大规模流量变化导致的故障或崩溃），将难以迅速解决问题，这将严重影响用户体验。

在微服务系统中部署新版本应用时，必须尽量减少对业务的影响，同时帮助开发人员验证新版本的功能、性能和用户满意度。

### 解决方案

灰度发布功能基于 Istio 的路由能力和 Flagger 开源组件实现。当服务的新版本发布时，允许部分用户继续使用旧版本，而另一部分用户使用新版本。在灰度发布过程中，如果新版本稳定且用户没有异议，流量调度比例可以逐渐调整，以扩大使用新版本的用户范围，直到所有用户迁移到新版本。

在灰度发布过程中，可以及时识别问题，修复缺陷，并在部署过程中实时监控流量行为。在异常情况下可实现自动回滚，以确保对业务的影响降到最低。

## 流量错误故障排除

### 场景描述

在大规模微服务系统中，服务之间的调用关系复杂而交错。一旦某个服务失败且问题无法长时间解决，就可能导致级联效应，影响其他服务，最终导致系统崩溃。

因此，对于微服务系统的开发人员和运维人员而言，实时监控服务的健康状态以防范潜在风险至关重要。同时，需要能够快速通过详细的监控数据排查业务故障。

### 解决方案

该平台建立了全面的服务故障排查流程。在服务故障发生时，平台能够追踪异常流量以识别故障位置，缩小排查范围，然后利用日志和监控数据分析具体原因，迅速解决问题。

- 提供关联拓扑图、流量监控面板、追踪和日志，为故障排查提供完整路径。

- 流量监控面板允许您查看服务、容器组和 API 级别的流量数据。

## 服务连接可靠性治理

### 场景描述

在微服务架构中，一个应用由多个服务构成，每个服务负责单一业务功能。服务之间的数据交互通过远程调用实现。然而，这引入了一个问题：当服务 A 调用服务 B，而服务 B 又调用其他服务时，如果其他服务的响应时间过长或不可用，服务 A 的调用将消耗越来越多的资源，最终导致系统故障，这被称为 **雪崩效应**。

### 解决方案

为了防止微服务系统中的级联故障，平台提供支持为服务配置流量治理策略和路由规则。这些机制可以建立保护机制并模拟服务调用的故障，确保服务连接的可靠性，增强微服务系统的整体稳定性。

- 支持负载均衡策略、断路器和连接池设置策略。

- 支持基于路由的错误注入、延迟响应、超时和重试、请求重写和流量复制。

## 服务连接安全治理

### 场景描述

在将单体应用拆分为服务后，提高了开发效率，增强了系统稳定性，并提高了运行效率。服务之间的调用从本地调用变为网络协议接口调用，这也带来了安全风险。因此，在微服务治理平台中，需要对流量进行加密，配置服务调用的授权，并提供验证和审计功能。

### 解决方案

- 该平台提供服务间流量加密的能力。通过为服务设置安全策略，可以使用 mTLS 对流量进行加密。

- 通过为服务设置黑名单或白名单，可以控制同一网格下服务之间的访问权限。

## 服务网格全生命周期管理

### 场景描述

一个完整的服务网格不仅包括 Istio 组件，还包括集成的扩展组件。在多集群环境中，服务网格的管理变得尤为复杂。在服务网格的整个生命周期中，不仅涉及服务网格的部署、更新和删除，还包括对服务网格健康状态的监控与查看。这使得运维人员能够及时发现异常，排查问题，确保服务网格为业务提供一致且稳定的支持。

### 解决方案

提供服务网格的全生命周期管理能力，包括从部署、更新、删除到健康监控。

- :: 服务网格管理：包括服务网格核心组件和扩展组件的部署、服务网格的更新和删除等。

- 组件健康检查：对核心组件和扩展组件的健康检查。

- 功能健康检查：对主要功能及相关内置功能的健康检查项目。

- 监控：与 Prometheus 和 Grafana 集成，提供默认看板以监控组件和业务信息。
