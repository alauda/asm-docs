---
weight: 30
sourceSHA: d034541adb23c9609f9e0af3a3c082a5e74f9e2d3fb8533d2048a89b16e5e64d
---

# Использование встроенных тегов OpenTelemetry Service в трассировке

## Обзор функции

Тег Span относится к данным в виде пары ключ-значение, прикрепленным к Span, предоставляя конкретную контекстуальную информацию для каждого Span, чтобы помочь разработчикам легче понимать и анализировать характеристики и влияние каждой операции.

Теги состоят из `key` и `value`, где `key` должен быть строкового типа, а `value` может быть строкой, логическим значением или числом.

## Категории тегов

### Метаданные

| Ключ                         | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                            | Пример значения |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| **internal.span.format**     | Формат данных внутреннего Span.                                                                                                                                                                                                                                                                                                                                                                                                                      | `otlp`           |
| **otel.status\_code**        | Статус Span.                                                                                                                                                                                                                                                                                                                                                                                                                                          | `ERROR`          |
| **span.kind**                | Тип Span:<br />- **client**: Указывает, что Span является исходящим вызовом (операцией клиента), т.е. клиент инициировал запрос к сервису или ресурсу.<br />- **server**: Указывает, что Span является входящим вызовом (операцией сервера), т.е. сервер получил и обработал запрос от клиента.<br />- **internal**: Указывает на внутреннюю операцию в приложении, не связанную с операциями с удаленным родителем или дочерним элементом. | `client`         |

### Информация о HTTP-запросе

| Ключ                                | Описание                                                                                                                                                                          | Пример значения                       |
| ----------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
| **http.flavor**                     | Версия протокола HTTP.                                                                                                                                                           | `1.1`                                |
| **http.method**                     | Метод HTTP-запроса.                                                                                                                                                             | `GET`                                |
| **http.response\_content\_length**  | Поле в заголовке HTTP-запроса, которое указывает длину тела запроса или ответа в байтах.                                                                                       | `12`                                 |
| **http.route**                      | API.                                                                                                                                                                           | `/get/{code}`                        |
| **http.scheme**                     | Тип протокола HTTP.                                                                                                                                                             | `http`                               |
| **http.status\_code**               | Код состояния HTTP.                                                                                                                                                              | `200`                                |
| **http.target**                     | Целевой путь HTTP-запроса, обычно включающий путь к ресурсу и возможные параметры запроса.                                                                                     | `/get/200?foo=bar`                  |
| **http.url**                        | URL запроса.<br />**Примечание**: Видно только для типа Span `client`.                                                                                                        | `http://calendar-app:9090/calendar` |
| **http.user\_agent**                | Заголовок User-Agent запроса, это характеристическая строка, которая помогает серверу и партнерам идентифицировать приложение, операционную систему, поставщика и версию запрашивающего пользовательского агента. | `okhttp/4.10.0`                     |
| **upstreamURLPath**                 | Путь URL вверх по потоку, указывающий путь к ресурсу, который должен быть обработан upstream-сервисом, включая возможные параметры запроса.                                     | `/get/200?foo=bar`                  |

### Сервис

| Ключ                            | Описание                                               | Пример значения          |
| ------------------------------- | ----------------------------------------------------- | ------------------------ |
| **inner.client.cluster.name**   | Имя кластера.                                        | `global`                 |
| **inner.client.env.type**       | Тип сервиса.                                        | `vm`, `k8s`              |
| **inner.client.ms.name**        | Имя сервиса.                                        | `notes-app`              |
| **inner.client.ms.namespace**   | Пространство имен, в котором находится сервис.       | `otel-ns`                |
| **net.host.name**               | Имя сетевого узла.                                   | `calendar-app`           |
| **net.host.port**               | Порт сетевого узла.                                   | `9090`                   |
| **net.sock.host.addr**          | Адрес хоста, подключенного по сетевому сокету.       | `10.3.0.118`             |
| **net.sock.peer.addr**          | Адрес соперника сетевого сокета.                      | `10.3.0.117`             |
| **net.sock.peer.port**          | Номер порта соперника сетевого сокета.                | `44794`                  |
| **net.transport**               | Протокол сетевой передачи.                             | `ip_tcp`                 |
| **thread.id**                   | Уникальный идентификатор потока.                      | `30`                     |
| **thread.name**                 | Имя потока.                                         | `http-nio-9090-exec-9`  |

### Промежуточное ПО

| Ключ                        | Описание                                                                                                                                                                                    | Пример значения                                                                                                                 |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| **db.system**               | Тип промежуточного ПО. В настоящее время поддерживаемые типы включают: **mysql**, **oracle**, **postgresql**, **redis**.                                                                | `mysql`                                                                                                                       |
| **db.connection\_string**   | Строка подключения. Это выражение, содержащее параметры, необходимые для подключения приложения к серверу базы данных, включая экземпляр сервера, имя базы данных и данные аутентификации. | `oracle:thin://oracle11g:1521`                                                                                                |
| **dn.name**                 | Имя базы данных.                                                                                                                                                                          | `db1`                                                                                                                         |
| **db.sql.table**            | Имя таблицы базы данных.                                                                                                                                                                   | `students`                                                                                                                    |
| **db.operation**            | Тип операции с базой данных.                                                                                                                                                                | `SELECT`                                                                                                                      |
| **db.statement**            | Заявление о запросе к базе данных.                                                                                                                                                         | `SET redis ?`<br />`select student0_.id as id1_0_0_, student0_.age as age2_0_0_ from students student0_ where student0_.id=?` |
| **net.peer.name**           | Имя сервиса промежуточного ПО.                                                                                                                                                               | `pg.ns`                                                                                                                       |
| **net.peer.port**           | Порт сервиса промежуточного ПО.                                                                                                                                                               | `5432`                                                                                                                        |
| **net.sock.peer.name**      | Имя сервиса Redis.                                                                                                                                                                            | `redis`                                                                                                                       |
| **net.sock.peer.addr**      | IP-адрес сервиса Redis.                                                                                                                                                                      | `10.4.199.164`                                                                                                                |
| **net.sock.peer.port**      | Порт сервиса Redis.                                                                                                                                                                            | `6379`                                                                                                                        |

### Процесс

| Ключ                             | Описание                                         | Пример значения                                                                                                                                                      |
| ------------------------------- | ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **cluster.name**                | Имя кластера.                                  | `global`                                                                                                                                                           |
| **container.id**                | Идентификатор контейнера.                      | `b960b4f13d0e28fdc296195c4c7c57152fa4e689bb473bf8718ec817a7eea481`                                                                                                |
| **container.name**              | Имя контейнера.                                | `notes-app`                                                                                                                                                        |
| **host.arch**                   | Архитектура хоста.                           | `amd64`                                                                                                                                                            |
| **host.name**                   | Имя хоста.                                   | `notes-app-deploy-5f6557bc88-zk7cz`                                                                                                                                |
| **ms.name**                     | Имя сервиса.                                | `notes-app`                                                                                                                                                        |
| **ms.namespace**                | Имя пространства имен, в котором находится сервис. | `otel-ns`                                                                                                                                                          |
| **os.description**              | Описание операционной системы.                | `Linux 3.10.0-1160.11.1.el7.x86\_64`                                                                                                                               |
| **os.type**                     | Тип операционной системы.                     | `linux`                                                                                                                                                            |
| **otel.library.name**           | Имя Java-библиотеки.                           | `io.opentelemetry.tomcat-7.0`                                                                                                                                      |
| **otel.library.version**        | Версия Java-библиотеки.                       | `1.24.0-alpha`                                                                                                                                                     |
| **process.command\_line**       | Параметры командной строки Java процесса.        | `/usr/local/openjdk-11/bin/java \-javaagent:/agent-22wwn/opentelemetry-javaagent-ext.jar -Dotel.instrumentation.runtime-metrics.experimental-metrics.enabled=true` |
| **process.executable.path**     | Путь к исполняемому файлу Java процесса.       | `/usr/local/openjdk-11/bin/java`                                                                                                                                   |
| **process.pid**                 | Идентификатор процесса.                        | `7`                                                                                                                                                                |
| **process.runtime.description** | Описание рабочей среды процесса.                | `Oracle Corporation OpenJDK 64-Bit Server VM 11.0.16+8`                                                                                                            |
| **process.runtime.name**        | Имя рабочей среды процесса.                     | `OpenJDK Runtime Environment`                                                                                                                                      |
| **process.runtime.version**     | Версия рабочей среды процесса.                  | `11.0.16+8`                                                                                                                                                        |
| **telemetry.auto.version**      | Версия Telemetry Auto.                      | `1.24.0`                                                                                                                                                           |
| **telemetry.sdk.language**      | Язык Telemetry SDK.                          | `java`                                                                                                                                                             |
| **telemetry.sdk.name**          | Имя Telemetry SDK.                          | `opentelemetry`                                                                                                                                                    |
| **telemetry.sdk.version**       | Версия Telemetry SDK.                       |                                                                                                                                                                    |
