---
weight: 10
sourceSHA: 36b68f122fd7f42cfe2d485097ac3531ef3310fe1ee58f9c020f5b78969cf29b
---

# Введение

Взаимное шифрование транспортного уровня (mTLS) — это протокол, который обеспечивает взаимную аутентификацию между двумя сторонами. Это основной режим аутентификации в некоторых протоколах (IKE, SSH) и необязательный в других (TLS). Вы можете использовать mTLS без изменения кода вашего приложения или сервиса. TLS полностью обрабатывается инфраструктурой сервиса Mesh и проходит между двумя прокси-боками.

По умолчанию mTLS включен в Service Mesh и установлен в режим с разрешением. В этом режиме прокси в Service Mesh принимают как незашифрованный трафик, так и соединения, зашифрованные с помощью mTLS. Если сервисы в mesh настроены на использование строгого mTLS для связи с сервисами за пределами mesh, связь может быть нарушена, поскольку строгий mTLS требует взаимной аутентификации между клиентом и сервером. Используйте режим с разрешением при миграции рабочих нагрузок в Service Mesh. Затем вы можете включить строгий mTLS между mesh, пространствами имен или приложениями.

## <span id="anquan">Создание политик безопасности</span>

### Шаги

1. В левом навигационном меню нажмите **Список сервисов**.

2. Нажмите на ***Имя сервиса***, для которого вы хотите создать правила безопасности.

3. Вкладке **Политики** нажмите **Создать политику** > **Безопасность** на правой стороне кластера.

4. В разделе **Правила** выберите **Режим с разрешением** или **Строгий режим**.

   - **Режим с разрешением**: позволяет сервису принимать как незашифрованный трафик, так и трафик с взаимным TLS.

   - **Строгий режим**: позволяет сервису принимать только трафик с взаимным TLS. Сервис будет обрабатывать только трафик, зашифрованный прокси, а незашифрованный трафик будет отклонен.

   **Примечание**: Включение **Режима с разрешением** позволяет сервису одновременно принимать как незашифрованный, так и трафик с взаимным TLS, что значительно упрощает внедрение взаимного TLS.

   Например: Когда операционный персонал хочет перенести сервис в Istio с включенным взаимным TLS, может возникнуть множество проблем с общением клиентов и серверов, не использующих Istio. Как правило, операционный персонал не может установить прокси Istio на всех клиентах одновременно и не имеет разрешений на это. Даже если прокси Istio установлены на сервере, они не могут включить взаимный TLS, не нарушая существующие соединения.

   **Режим с разрешением** гибко решает эту ситуацию. Прокси Istio, установленный в сервисе, сразу принимает трафик с взаимным TLS, не нарушая существующий незашифрованный трафик. Таким образом, операционный персонал может постепенно установить и настроить прокси Istio клиента для отправки трафика с взаимным TLS. Как только клиенты настроены, сервер можно настроить на **Строгий режим** (только TLS).

5. Нажмите **Создать**.
   При создании политик безопасности система автоматически создаст клиентские правила и включит TLS по умолчанию.
