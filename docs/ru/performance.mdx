---
weight: 90
title: Производительность
sourceSHA: f9b1cbff036eb2c3c203c6602b5facdf176fdbc6e761783c5ba2fedc197b70a6
---

Производительность побочного контейнера зависит от многих факторов, таких как:

- Количество клиентских соединений

- Целевая скорость запросов

- Размер запроса и размер ответа

- Количество потоков-работников прокси

- Протокол

- Ядра процессора

Количество и типы прокси-фильтров, в частности, фильтров, связанных с телеметрией v2. Задержка, пропускная способность, а также потребление процессора и памяти прокси измеряются в зависимости от этих факторов.

## Потребление CPU и памяти

Поскольку прокси-побочного контейнера выполняет дополнительные операции с данными, он потребляет CPU и память. Начиная с версии Istio 1.12.3, прокси потребляет около 0,5 vCPU на 1000 запросов в секунду.

Потребление памяти прокси зависит от общего состояния конфигурации, которое поддерживает прокси. Большое количество слушателей, кластеров и маршрутов может увеличить использование памяти.

Поскольку прокси обычно не буферизует данные, проходящие через него, скорость запросов не влияет на потребление памяти.

## Дополнительная задержка

Поскольку Istio внедряет прокси-побочного контейнера на пути данных, задержка является важным аспектом. Istio добавляет фильтр аутентификации, фильтр телеметрии и фильтр обмена метаданными в прокси. Каждый дополнительный фильтр увеличивает длину пути внутри прокси и влияет на задержку.

Прокси Envoy собирает необработанные данные телеметрии после отправки ответа клиенту. Время, затраченное на сбор необработанной телеметрии для запроса, не учитывается в общем времени, необходимом для завершения этого запроса. Однако, поскольку работник занят обработкой запроса, он не начнет обработку следующего запроса немедленно. Этот процесс увеличивает время ожидания в очереди следующего запроса и влияет на средние и максимальные задержки. Фактическая максимальная задержка зависит от схемы трафика.

Внутри сетевой структуры запрос проходит через прокси-клиента, а затем через прокси-сервера. В конфигурации по умолчанию Istio 1.12.3 (то есть Istio с телеметрией v2) оба прокси добавляют примерно 1,7 мс и 2,7 мс к 90-му и 99-му процентилям задержки соответственно, по сравнению с базовой задержкой канала передачи данных.

## Настройка квот ресурсов побочного контейнера (CPU и память)

### Размер кластера

На уровне конфигурации кластера сервисной сетки вы можете установить стандартные квоты ресурсов побочного контейнера (CPU и память) для кластера. Когда пользователи добавляют сервисы, эта конфигурация будет использоваться по умолчанию в качестве квоты ресурсов для побочного контейнера.

Пользователи с правами управления платформой могут перейти на страницу деталей сервисной сетки и в разделе **Конфигурация** настроить стандартные квоты ресурсов побочного контейнера, обновив **Конфигурацию размера кластера**.

### Указание сервисов

- При добавлении нового сервиса установите конкретные квоты ресурсов побочного контейнера (CPU и память).

- После доступа к странице деталей уже добавленного сервиса перейдите на вкладку **Детали** и обновите конфигурацию побочного контейнера в разделе **Побочный контейнер**.
