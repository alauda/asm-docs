apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: apiattributes.asm.alauda.io
spec:
  group: asm.alauda.io
  names:
    kind: ApiAttribute
    listKind: ApiAttributeList
    plural: apiattributes
    shortNames:
    - apiattr
    singular: apiattribute
  preserveUnknownFields: false
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ApiAttribute is the Schema for the apiattrbutes API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ApiAttributeSpec defines the desired state of ApiAttribute
            properties:
              exacts:
                description: Exact match type.
                items:
                  properties:
                    envoypatternpath:
                      type: string
                    matchpath:
                      type: string
                    method:
                      type: string
                    operationid:
                      type: string
                    sourcetype:
                      type: string
                  required:
                  - matchpath
                  - method
                  - operationid
                  type: object
                type: array
              prefixs:
                description: Prefix matching.
                items:
                  properties:
                    envoypatternpath:
                      type: string
                    matchpath:
                      type: string
                    method:
                      type: string
                    operationid:
                      type: string
                    sourcetype:
                      type: string
                  required:
                  - matchpath
                  - method
                  - operationid
                  type: object
                type: array
              regmatches:
                description: Regular matching, deprecated.
                items:
                  properties:
                    envoypatternpath:
                      type: string
                    matchpath:
                      type: string
                    method:
                      type: string
                    operationid:
                      type: string
                    sourcetype:
                      type: string
                  required:
                  - matchpath
                  - method
                  - operationid
                  type: object
                type: array
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            description: ApiAttributeStatus defines the observed state of ApiAttribute
            type: object
        type: object
    served: true
    storage: false
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: ApiAttribute is the Schema for the apiattributes API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ApiAttributeSpec defines the desired state of ApiAttribute
            properties:
              apis:
                description: api 列表
                items:
                  description: api
                  properties:
                    gatewayGroupReferences:
                      description: api被服务分组引用列表
                      items:
                        type: string
                      type: array
                    method:
                      description: 请求方法
                      type: string
                    operationid:
                      description: API名称，对标 swaggger 的 OperationId
                      type: string
                    path:
                      description: 请求路径，支持 restful api 路径参数
                      type: string
                    port:
                      description: api流量统计不需要，服务网关分组需要，此处仅记录
                      maximum: 65535
                      minimum: 1
                      type: integer
                  required:
                  - method
                  - operationid
                  - path
                  - port
                  type: object
                type: array
              exacts:
                description: 精确匹配
                items:
                  properties:
                    envoypatternpath:
                      type: string
                    matchpath:
                      type: string
                    method:
                      type: string
                    operationid:
                      type: string
                    sourcetype:
                      type: string
                  required:
                  - matchpath
                  - method
                  - operationid
                  type: object
                type: array
              prefixs:
                description: 前缀匹配
                items:
                  properties:
                    envoypatternpath:
                      type: string
                    matchpath:
                      type: string
                    method:
                      type: string
                    operationid:
                      type: string
                    sourcetype:
                      type: string
                  required:
                  - matchpath
                  - method
                  - operationid
                  type: object
                type: array
              regmatches:
                description: 正则匹配，已废弃
                items:
                  properties:
                    envoypatternpath:
                      type: string
                    matchpath:
                      type: string
                    method:
                      type: string
                    operationid:
                      type: string
                    sourcetype:
                      type: string
                  required:
                  - matchpath
                  - method
                  - operationid
                  type: object
                type: array
              swaggerImport:
                description: Swagger Import info
                properties:
                  errorCode:
                    type: integer
                  format:
                    type: string
                  opId:
                    type: string
                  port:
                    type: integer
                  sourceType:
                    type: string
                  totalApi:
                    type: integer
                  version:
                    type: string
                type: object
            type: object
          status:
            description: ApiAttributeStatus defines the observed state of ApiAttribute
            type: object
        type: object
    served: true
    storage: true
